# 无人船作业安全预测系统 - 系统概述

## 项目简介

无人船作业安全预测系统（boat_pro）是一个专为无人船集群设计的智能安全管理系统，提供实时碰撞预测、安全告警和智能决策支持。

## 系统架构

### 核心组件

```
┌─────────────────┐    MQTT通信    ┌─────────────────┐
│       MPC       │ ◄──────────► │       GCS       │
│  (现场执行单元)   │               │  (地面控制站)    │
└─────────────────┘               └─────────────────┘
         │                                 │
         ▼                                 ▼
   ┌──────────┐                    ┌──────────┐
   │ 碰撞检测  │                    │ 监控界面  │
   │ 避障决策  │                    │ 任务管理  │
   │ 状态上报  │                    │ 参数配置  │
   └──────────┘                    └──────────┘
```

### 系统角色

**MPC (Mission Planning Computer)**
- 职责: 现场执行单元，负责实时决策和控制
- 功能: 碰撞检测、自动避障、状态监控、数据上报

**GCS (Ground Control Station)**  
- 职责: 地面监控中心，负责监控和高级管理
- 功能: 船队监控、任务规划、参数配置、紧急接管

## 核心功能

### 1. 碰撞预测功能
- **出坞碰撞预测**: 无人船驶出船坞时的碰撞风险评估
- **入坞碰撞预测**: 无人船驶入船坞时的碰撞安全预测
- **航线碰撞预测**: 按规划航线运行时前后船碰撞预测
- **对向碰撞预测**: 对向航行时的碰撞安全预测

### 2. 优先级管理
- **驶入船坞**: 最高优先级
- **正常航行**: 中等优先级  
- **驶出船坞**: 最低优先级

### 3. 告警系统
- **紧急级别**: 碰撞距离 < 速度×5秒，预留5秒停船时间
- **警告级别**: 碰撞距离 < 速度×30秒，预留30秒反应时间
- **正常级别**: 碰撞距离 > 速度×30秒，安全状态

### 4. 通信接口
- **MQTT通信**: 基于MQTT协议的实时双向通信
- **UDP通信**: 支持Drone ID和NMEA 2000协议（兼容）

## 应用场景

### 技术规格
- **船只规格**: 75cm×47cm无人船（可配置）
- **集群规模**: 支持最多30条无人船
- **航线设计**: 最多2条航线（顺时针/逆时针）
- **安全间距**: 航线间距>10米
- **水域环境**: 静水或低流速水域

### 使用场景
- 港口无人船集群作业
- 水域巡检任务
- 海洋数据采集
- 应急救援支持

## 技术特点

### 实时性
- 1Hz船只状态更新
- 毫秒级碰撞检测
- 实时告警推送

### 可靠性
- 多级QoS保障
- 心跳监控机制
- 故障自动恢复

### 扩展性
- 模块化设计
- 标准MQTT协议
- 可配置参数

### 安全性
- 多级告警机制
- 紧急接管功能
- 数据加密传输

## 数据格式

### 统一标准
- **数据格式**: JSON格式数据交换
- **时间单位**: 秒(s)
- **坐标系统**: WGS84
- **速度单位**: 米/秒(m/s)
- **角度单位**: 度(°)

### 可扩展性
所有数据结构支持字段扩展，便于功能升级和定制化需求。

## 部署要求

### 系统要求
- **操作系统**: Ubuntu 18.04+ / CentOS 7+
- **编译器**: GCC 7.0+ 支持C++17
- **依赖库**: jsoncpp, mosquitto, cmake

### 硬件要求
- **CPU**: 双核2.0GHz以上
- **内存**: 4GB以上
- **存储**: 10GB可用空间
- **网络**: 千兆以太网

### 网络要求
- **MQTT端口**: 1883 (可配置)
- **延迟要求**: <100ms
- **带宽要求**: 1Mbps以上

## 快速开始

### 1. 环境准备
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install build-essential cmake
sudo apt-get install libjsoncpp-dev libmosquitto-dev mosquitto

# 启动MQTT服务
sudo systemctl start mosquitto
sudo systemctl enable mosquitto
```

### 2. 编译安装
```bash
git clone <repository>
cd boat_pro
mkdir build && cd build
cmake ..
make
```

### 3. 运行测试
```bash
# 快速功能检查
./scripts/mqtt_quick_check.sh

# 完整功能测试
./scripts/mqtt_full_test.sh

# 实时通信演示
./scripts/mqtt_demo.sh
```

## 文档导航

- **[MQTT通信架构](MQTT_ARCHITECTURE.md)** - MQTT通信协议和架构设计
- **[API接口文档](API_REFERENCE.md)** - 系统API接口说明
- **[部署指南](DEPLOYMENT_GUIDE.md)** - 系统部署和配置指南
- **[测试报告](TEST_REPORT.md)** - 系统测试结果和验证报告


