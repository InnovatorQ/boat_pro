# 快速验证检查清单

## 🚀 5分钟快速验证

### 1. 环境检查 (30秒)
```bash
# 检查MQTT服务
systemctl status mosquitto

# 检查编译结果
ls -la build/mqtt_example build/simulation/boat_simulator
```
**预期结果**: ✅ mosquitto服务active，程序文件存在

### 2. 基础通信测试 (1分钟)
**终端1**:
```bash
mosquitto_sub -h localhost -t "test/quick" -v
```

**终端2**:
```bash
mosquitto_pub -h localhost -t "test/quick" -m "快速测试"
```
**预期结果**: ✅ 终端1显示消息

### 3. MQTT接口测试 (2分钟)
**终端1**:
```bash
mosquitto_sub -h localhost -t "boat_safety/output/+" -v
```

**终端2**:
```bash
cd build && ./mqtt_example
```
**预期结果**: ✅ 终端1收到system_status消息

### 4. 数据处理测试 (1分钟)
```bash
# 发送船只数据
mosquitto_pub -h localhost -t "boat_safety/input/boat_state/1" \
  -m '{"sysid":1,"timestamp":'$(date +%s)',"lat":30.549832,"lng":114.342922,"heading":90.0,"speed":3.5,"status":2,"route_direction":1}'
```
**预期结果**: ✅ 程序日志显示"Updated boat state"，可能触发告警

### 5. 仿真测试 (30秒)
```bash
cd build/simulation && timeout 10s ./boat_simulator
```
**预期结果**: ✅ 显示船只出坞和仿真状态

---

## 📋 详细验证检查清单

### ✅ 环境准备
- [ ] Ubuntu/Linux系统
- [ ] 已安装libmosquitto-dev
- [ ] 已安装libjsoncpp-dev  
- [ ] 已安装cmake和build-essential
- [ ] mosquitto服务运行正常

### ✅ 编译验证
- [ ] 项目编译无错误
- [ ] mqtt_example程序存在
- [ ] boat_simulator程序存在
- [ ] 所有依赖库链接正常

### ✅ 基础功能
- [ ] MQTT连接建立成功
- [ ] 消息订阅功能正常
- [ ] 消息发布功能正常
- [ ] JSON格式解析正确
- [ ] 程序启动无异常

### ✅ MQTT接口功能
- [ ] 订阅boat_safety主题成功
- [ ] 接收船只状态消息
- [ ] 接收船坞信息消息
- [ ] 接收航线信息消息
- [ ] 发布系统状态消息
- [ ] 发布碰撞告警消息
- [ ] 处理船坞管理请求

### ✅ 业务逻辑
- [ ] 船只状态数据验证
- [ ] 高速告警触发正常
- [ ] 船坞锁定/解锁响应
- [ ] 航线信息处理正确
- [ ] 时间戳格式正确
- [ ] 坐标格式符合WGS84

### ✅ 仿真系统
- [ ] 仿真器启动成功
- [ ] 船只出坞行为正常
- [ ] 航线导航功能正常
- [ ] 实时位置更新
- [ ] 速度航向变化合理
- [ ] 多船只并发处理

### ✅ 性能指标
- [ ] 消息延迟 < 100ms
- [ ] 内存使用 < 100MB
- [ ] CPU使用率 < 20%
- [ ] 连接稳定性良好
- [ ] 长时间运行稳定

### ✅ 错误处理
- [ ] 网络断开自动重连
- [ ] 无效消息格式处理
- [ ] 异常情况优雅降级
- [ ] 错误日志记录完整

---

## 🔧 常见问题快速解决

### 问题1: mosquitto连接失败
```bash
sudo systemctl restart mosquitto
sudo systemctl enable mosquitto
```

### 问题2: 编译错误
```bash
sudo apt-get update
sudo apt-get install libmosquitto-dev libjsoncpp-dev
cd build && make clean && make
```

### 问题3: 消息收不到
```bash
# 检查主题名称
mosquitto_sub -h localhost -t "#" -v

# 检查防火墙
sudo ufw status
```

### 问题4: JSON解析错误
```bash
# 验证JSON格式
echo '你的JSON' | python3 -m json.tool
```

---

## 📊 验证评分标准

| 分数 | 等级 | 说明 | 建议 |
|------|------|------|------|
| 90-100 | 优秀 | 所有功能正常 | 可投入生产 |
| 80-89 | 良好 | 主要功能正常 | 修复小问题后部署 |
| 70-79 | 一般 | 基本功能正常 | 需要优化改进 |
| 60-69 | 及格 | 部分功能有问题 | 需要调试修复 |
| <60 | 不合格 | 严重功能缺陷 | 需要重新开发 |

---

## 🎯 验证重点

### 核心功能 (必须通过)
1. **MQTT通信** - 系统基础
2. **消息处理** - 数据流转
3. **船只管理** - 业务核心
4. **安全监控** - 项目目标

### 重要功能 (建议通过)
1. **仿真系统** - 测试验证
2. **性能指标** - 生产就绪
3. **错误处理** - 系统稳定
4. **扩展性** - 未来发展

### 可选功能 (加分项)
1. **高级告警** - 智能化
2. **数据分析** - 决策支持
3. **可视化** - 用户体验
4. **集群部署** - 高可用

---

## 📝 验证记录模板

```
验证日期: ____年__月__日
验证人员: ________________
验证版本: ________________

快速验证结果:
□ 环境检查: 通过/失败
□ 基础通信: 通过/失败
□ MQTT接口: 通过/失败
□ 数据处理: 通过/失败
□ 仿真测试: 通过/失败

详细功能验证:
□ 环境准备: __/5
□ 编译验证: __/3
□ 基础功能: __/5
□ MQTT接口: __/7
□ 业务逻辑: __/6
□ 仿真系统: __/6
□ 性能指标: __/5
□ 错误处理: __/4

总分: __/41
等级: 优秀/良好/一般/及格/不合格

主要问题:
1. ________________________
2. ________________________
3. ________________________

改进建议:
1. ________________________
2. ________________________
3. ________________________

验证结论:
□ 推荐部署
□ 修复后部署
□ 需要重新开发

签名: ________________
```
